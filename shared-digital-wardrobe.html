<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AIæ™ºèƒ½ç”µå­è¡£æ©± - è®©ç©¿æ­æ›´ç®€å•</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ğŸ‘—</text></svg>">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'SF Pro Display', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
            line-height: 1.6;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }
        
        .header {
            text-align: center;
            color: white;
            margin-bottom: 40px;
            padding: 30px 0;
        }
        
        .header h1 {
            font-size: 3rem;
            margin-bottom: 15px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
            font-weight: 700;
        }
        
        .header .subtitle {
            font-size: 1.3rem;
            opacity: 0.9;
            margin-bottom: 10px;
        }
        
        .header .description {
            font-size: 1rem;
            opacity: 0.8;
            max-width: 600px;
            margin: 0 auto;
        }
        
        .welcome-banner {
            background: rgba(255,255,255,0.1);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 25px;
            margin-bottom: 30px;
            color: white;
            text-align: center;
            border: 1px solid rgba(255,255,255,0.2);
        }
        
        .welcome-banner h2 {
            font-size: 1.5rem;
            margin-bottom: 10px;
        }
        
        .welcome-banner p {
            opacity: 0.9;
            font-size: 1.1rem;
        }
        
        .feature-highlights {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 30px;
        }
        
        .feature-item {
            background: rgba(255,255,255,0.1);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 20px;
            text-align: center;
            color: white;
            border: 1px solid rgba(255,255,255,0.2);
            transition: transform 0.3s ease;
        }
        
        .feature-item:hover {
            transform: translateY(-5px);
        }
        
        .feature-icon {
            font-size: 2.5rem;
            margin-bottom: 10px;
        }
        
        .feature-title {
            font-size: 1.1rem;
            font-weight: 600;
            margin-bottom: 5px;
        }
        
        .feature-desc {
            font-size: 0.9rem;
            opacity: 0.8;
        }
        
        .controls {
            background: white;
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
        }
        
        .control-section {
            margin-bottom: 30px;
        }
        
        .control-section:last-child {
            margin-bottom: 0;
        }
        
        .control-title {
            font-size: 1.4rem;
            color: #2c3e50;
            margin-bottom: 20px;
            font-weight: 700;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .add-form {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            align-items: end;
        }
        
        .form-group {
            display: flex;
            flex-direction: column;
        }
        
        .form-group label {
            margin-bottom: 8px;
            font-weight: 600;
            color: #555;
            font-size: 0.95rem;
        }
        
        .form-group input,
        .form-group select {
            padding: 12px 16px;
            border: 2px solid #e2e8f0;
            border-radius: 10px;
            font-size: 1rem;
            transition: all 0.3s ease;
            background: #f8f9fa;
        }
        
        .form-group input:focus,
        .form-group select:focus {
            outline: none;
            border-color: #667eea;
            background: white;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }
        
        .btn {
            padding: 14px 28px;
            border: none;
            border-radius: 10px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-block;
            text-align: center;
        }
        
        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);
        }
        
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(102, 126, 234, 0.4);
        }
        
        .btn-danger {
            background: linear-gradient(135deg, #e53e3e 0%, #c53030 100%);
            color: white;
            font-size: 0.9rem;
            padding: 10px 20px;
        }
        
        .btn-danger:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(229, 62, 62, 0.3);
        }
        
        .btn-edit {
            background: linear-gradient(135deg, #38a169 0%, #2f855a 100%);
            color: white;
            font-size: 0.9rem;
            padding: 10px 20px;
            margin-right: 10px;
        }
        
        .btn-edit:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(56, 161, 105, 0.3);
        }
        
        .filters {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
            align-items: center;
        }
        
        .filter-group {
            display: flex;
            flex-direction: column;
            min-width: 180px;
        }
        
        .filter-group label {
            margin-bottom: 8px;
            font-weight: 600;
            color: #555;
            font-size: 0.95rem;
        }
        
        .search-box {
            flex: 1;
            min-width: 250px;
        }
        
        .wardrobe-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 30px;
            margin-top: 30px;
        }
        
        .clothing-item {
            background: white;
            border-radius: 20px;
            padding: 25px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }
        
        .clothing-item::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, #667eea, #764ba2);
        }
        
        .clothing-item:hover {
            transform: translateY(-8px);
            box-shadow: 0 20px 40px rgba(0,0,0,0.15);
        }
        
        .item-image {
            width: 100%;
            height: 220px;
            background: #f8f9fa;
            border-radius: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 20px;
            font-size: 4rem;
            border: 2px dashed #e2e8f0;
            overflow: hidden;
        }
        
        .item-name {
            font-size: 1.4rem;
            font-weight: 700;
            color: #2c3e50;
            margin-bottom: 12px;
        }
        
        .item-details {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 12px;
            margin-bottom: 20px;
        }
        
        .item-detail {
            font-size: 0.95rem;
            color: #666;
            padding: 8px 12px;
            background: #f8f9fa;
            border-radius: 8px;
        }
        
        .item-detail strong {
            color: #333;
            font-weight: 600;
        }
        
        .item-actions {
            display: flex;
            justify-content: flex-end;
            gap: 12px;
        }
        
        .category-tag {
            position: absolute;
            top: 20px;
            right: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 6px 16px;
            border-radius: 25px;
            font-size: 0.85rem;
            font-weight: 600;
            box-shadow: 0 2px 10px rgba(102, 126, 234, 0.3);
        }
        
        .empty-state {
            text-align: center;
            padding: 80px 20px;
            color: white;
        }
        
        .empty-state h3 {
            font-size: 2rem;
            margin-bottom: 15px;
            opacity: 0.9;
        }
        
        .empty-state p {
            opacity: 0.7;
            font-size: 1.1rem;
        }
        
        .stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
            gap: 25px;
            margin-bottom: 40px;
        }
        
        .stat-card {
            background: rgba(255,255,255,0.95);
            backdrop-filter: blur(10px);
            padding: 25px;
            border-radius: 20px;
            text-align: center;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            border: 1px solid rgba(255,255,255,0.2);
        }
        
        .stat-number {
            font-size: 2.5rem;
            font-weight: 800;
            color: #667eea;
            margin-bottom: 8px;
        }
        
        .stat-label {
            color: #666;
            font-size: 1rem;
            font-weight: 600;
        }
        
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.6);
            z-index: 1000;
            backdrop-filter: blur(5px);
        }
        
        .modal-content {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: white;
            padding: 40px;
            border-radius: 20px;
            width: 90%;
            max-width: 600px;
            max-height: 90vh;
            overflow-y: auto;
            box-shadow: 0 20px 40px rgba(0,0,0,0.2);
        }
        
        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
        }
        
        .modal-title {
            font-size: 1.5rem;
            font-weight: 700;
            color: #2c3e50;
        }
        
        .close-btn {
            background: none;
            border: none;
            font-size: 1.8rem;
            cursor: pointer;
            color: #666;
            padding: 5px;
            border-radius: 50%;
            transition: all 0.3s ease;
        }
        
        .close-btn:hover {
            background: #f0f0f0;
            color: #333;
        }
        
        .upload-area {
            border: 3px dashed #667eea;
            border-radius: 15px;
            padding: 40px;
            text-align: center;
            background: linear-gradient(135deg, #f8f9ff 0%, #f0f2ff 100%);
            cursor: pointer;
            transition: all 0.3s ease;
            margin-bottom: 20px;
        }
        
        .upload-area:hover {
            border-color: #5a67d8;
            background: linear-gradient(135deg, #f0f2ff 0%, #e8ebff 100%);
            transform: translateY(-2px);
        }
        
        .upload-area.drag-over {
            border-color: #4ade80;
            background: linear-gradient(135deg, #f0fff4 0%, #e8f5e8 100%);
        }
        
        .upload-icon {
            font-size: 3.5rem;
            color: #667eea;
            margin-bottom: 15px;
        }
        
        .upload-text {
            color: #666;
            margin-bottom: 10px;
            font-size: 1.1rem;
            font-weight: 600;
        }
        
        .upload-hint {
            font-size: 0.9rem;
            color: #999;
        }
        
        .image-preview {
            display: none;
            position: relative;
            margin-bottom: 20px;
        }
        
        .preview-image {
            width: 100%;
            height: 250px;
            object-fit: cover;
            border-radius: 15px;
            border: 2px solid #e2e8f0;
        }
        
        .remove-image {
            position: absolute;
            top: 15px;
            right: 15px;
            background: rgba(229, 62, 62, 0.9);
            color: white;
            border: none;
            border-radius: 50%;
            width: 35px;
            height: 35px;
            cursor: pointer;
            font-size: 1.3rem;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }
        
        .remove-image:hover {
            background: rgba(197, 48, 48, 0.9);
            transform: scale(1.1);
        }
        
        .ai-analyze-btn {
            background: linear-gradient(135deg, #9f7aea 0%, #805ad5 100%);
            color: white;
            border: none;
            padding: 15px 25px;
            border-radius: 10px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 600;
            margin-top: 15px;
            transition: all 0.3s ease;
            width: 100%;
        }
        
        .ai-analyze-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(159, 122, 234, 0.4);
        }
        
        .ai-analyze-btn:disabled {
            background: #a0aec0;
            cursor: not-allowed;
            transform: none;
        }
        
        .loading-spinner {
            display: inline-block;
            width: 18px;
            height: 18px;
            border: 2px solid #ffffff;
            border-radius: 50%;
            border-top-color: transparent;
            animation: spin 1s ease-in-out infinite;
            margin-right: 10px;
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        
        .real-image {
            width: 100%;
            height: 220px;
            object-fit: cover;
            border-radius: 15px;
            border: none;
        }
        
        .help-section {
            background: rgba(255,255,255,0.1);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
            color: white;
            border: 1px solid rgba(255,255,255,0.2);
        }
        
        .help-title {
            font-size: 1.3rem;
            font-weight: 700;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .help-content {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
        }
        
        .help-item {
            background: rgba(255,255,255,0.1);
            padding: 20px;
            border-radius: 15px;
            border: 1px solid rgba(255,255,255,0.2);
        }
        
        .help-item-title {
            font-weight: 600;
            margin-bottom: 10px;
            font-size: 1.1rem;
        }
        
        .help-item-desc {
            opacity: 0.9;
            font-size: 0.95rem;
            line-height: 1.5;
        }
        
        .footer {
            text-align: center;
            color: rgba(255,255,255,0.8);
            padding: 40px 0;
            margin-top: 50px;
        }
        
        .footer p {
            margin-bottom: 10px;
        }
        
        .footer a {
            color: rgba(255,255,255,0.9);
            text-decoration: none;
            font-weight: 600;
        }
        
        .footer a:hover {
            color: white;
        }
        
        @media (max-width: 768px) {
            .container {
                padding: 15px;
            }
            
            .header h1 {
                font-size: 2.5rem;
            }
            
            .header .subtitle {
                font-size: 1.1rem;
            }
            
            .add-form {
                grid-template-columns: 1fr;
            }
            
            .filters {
                flex-direction: column;
                align-items: stretch;
            }
            
            .wardrobe-grid {
                grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
                gap: 20px;
            }
            
            .stats {
                grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
                gap: 15px;
            }
            
            .feature-highlights {
                grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            }
            
            .help-content {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸ‘— AIæ™ºèƒ½ç”µå­è¡£æ©±</h1>
            <p class="subtitle">è®©ç©¿æ­æ›´ç®€å•ï¼Œè®©ç”Ÿæ´»æ›´ç¾å¥½</p>
            <p class="description">ä½¿ç”¨AIæŠ€æœ¯æ™ºèƒ½è¯†åˆ«ä½ çš„è¡£ç‰©ï¼Œè½»æ¾ç®¡ç†ä½ çš„æ—¶å°šå•å“</p>
        </div>
        
        <!-- æ¬¢è¿æ¨ªå¹… -->
        <div class="welcome-banner">
            <h2>ğŸ‰ æ¬¢è¿ä½¿ç”¨AIæ™ºèƒ½ç”µå­è¡£æ©±</h2>
            <p>ä¸Šä¼ è¡£ç‰©ç…§ç‰‡ï¼ŒAIè‡ªåŠ¨è¯†åˆ«é¢œè‰²å’Œç±»å‹ï¼Œè®©è¡£æ©±ç®¡ç†å˜å¾—è½»æ¾æœ‰è¶£ï¼</p>
        </div>
        
        <!-- åŠŸèƒ½ç‰¹è‰² -->
        <div class="feature-highlights">
            <div class="feature-item">
                <div class="feature-icon">ğŸ¤–</div>
                <div class="feature-title">AIæ™ºèƒ½è¯†åˆ«</div>
                <div class="feature-desc">è‡ªåŠ¨è¯†åˆ«è¡£ç‰©é¢œè‰²å’Œç±»å‹</div>
            </div>
            <div class="feature-item">
                <div class="feature-icon">ğŸ“±</div>
                <div class="feature-title">ç§»åŠ¨ç«¯ä¼˜åŒ–</div>
                <div class="feature-desc">æ‰‹æœºå¹³æ¿å®Œç¾é€‚é…</div>
            </div>
            <div class="feature-item">
                <div class="feature-icon">ğŸ”’</div>
                <div class="feature-title">æ•°æ®å®‰å…¨</div>
                <div class="feature-desc">æ•°æ®æœ¬åœ°å­˜å‚¨ï¼Œä¿æŠ¤éšç§</div>
            </div>
            <div class="feature-item">
                <div class="feature-icon">âš¡</div>
                <div class="feature-title">å¿«é€Ÿä¾¿æ·</div>
                <div class="feature-desc">æ‹–æ‹½ä¸Šä¼ ï¼Œä¸€é”®ç®¡ç†</div>
            </div>
        </div>
        
        <!-- ç»Ÿè®¡æ•°æ® -->
        <div class="stats">
            <div class="stat-card">
                <div class="stat-number" id="totalItems">0</div>
                <div class="stat-label">æ€»è®¡è¡£ç‰©</div>
            </div>
            <div class="stat-card">
                <div class="stat-number" id="topCount">0</div>
                <div class="stat-label">ä¸Šè¡£</div>
            </div>
            <div class="stat-card">
                <div class="stat-number" id="bottomCount">0</div>
                <div class="stat-label">ä¸‹è£…</div>
            </div>
            <div class="stat-card">
                <div class="stat-number" id="shoeCount">0</div>
                <div class="stat-label">é‹å­</div>
            </div>
        </div>
        
        <!-- æ§åˆ¶é¢æ¿ -->
        <div class="controls">
            <!-- æ·»åŠ æ–°è¡£ç‰© -->
            <div class="control-section">
                <h3 class="control-title">
                    <span>â•</span>
                    <span>æ·»åŠ æ–°è¡£ç‰©</span>
                </h3>
                <form class="add-form" id="addClothingForm">
                    <div class="form-group">
                        <label for="itemName">è¡£ç‰©åç§°</label>
                        <input type="text" id="itemName" required placeholder="ä¾‹å¦‚ï¼šç™½è‰²Tæ¤">
                    </div>
                    <div class="form-group">
                        <label for="itemCategory">è¡£ç‰©ç±»åˆ«</label>
                        <select id="itemCategory" required>
                            <option value="">é€‰æ‹©ç±»åˆ«</option>
                            <option value="ä¸Šè¡£">ä¸Šè¡£</option>
                            <option value="ä¸‹è£…">ä¸‹è£…</option>
                            <option value="è¿è¡£è£™">è¿è¡£è£™</option>
                            <option value="å¤–å¥—">å¤–å¥—</option>
                            <option value="é‹å­">é‹å­</option>
                            <option value="é…é¥°">é…é¥°</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="itemColor">ä¸»è¦é¢œè‰²</label>
                        <input type="text" id="itemColor" placeholder="ä¾‹å¦‚ï¼šç™½è‰²ã€è“è‰²">
                    </div>
                    <div class="form-group">
                        <label for="itemBrand">å“ç‰Œ</label>
                        <input type="text" id="itemBrand" placeholder="ä¾‹å¦‚ï¼šUNIQLOã€ZARA">
                    </div>
                    <div class="form-group">
                        <label for="itemSize">å°ºç </label>
                        <input type="text" id="itemSize" placeholder="ä¾‹å¦‚ï¼šMã€Lã€XL">
                    </div>
                    <div class="form-group">
                        <label for="itemSeason">é€‚åˆå­£èŠ‚</label>
                        <select id="itemSeason">
                            <option value="">é€‰æ‹©å­£èŠ‚</option>
                            <option value="æ˜¥å­£">æ˜¥å­£</option>
                            <option value="å¤å­£">å¤å­£</option>
                            <option value="ç§‹å­£">ç§‹å­£</option>
                            <option value="å†¬å­£">å†¬å­£</option>
                            <option value="å››å­£">å››å­£</option>
                        </select>
                    </div>
                </form>
                
                <!-- å›¾ç‰‡ä¸Šä¼ åŒºåŸŸ -->
                <div class="form-group" style="grid-column: 1 / -1;">
                    <label>è¡£ç‰©å›¾ç‰‡</label>
                    <div class="upload-area" id="uploadArea">
                        <div class="upload-icon">ğŸ“·</div>
                        <div class="upload-text">ç‚¹å‡»æˆ–æ‹–æ‹½å›¾ç‰‡åˆ°è¿™é‡Œ</div>
                        <div class="upload-hint">æ”¯æŒ JPGã€PNGã€WEBP æ ¼å¼ï¼Œæœ€å¤§ 5MB</div>
                        <input type="file" id="imageInput" accept="image/*" style="display: none;">
                    </div>
                    <div class="image-preview" id="imagePreview">
                        <img id="previewImg" class="preview-image" alt="é¢„è§ˆ">
                        <button type="button" class="remove-image" id="removeImage">&times;</button>
                    </div>
                    <button type="button" class="ai-analyze-btn" id="aiAnalyzeBtn" style="display: none;">
                        ğŸ¤– AIæ™ºèƒ½è¯†åˆ« (é¢œè‰²+å½¢çŠ¶åˆ†æ)
                    </button>
                </div>
                
                <div class="form-group" style="grid-column: 1 / -1;">
                    <button type="submit" class="btn btn-primary" form="addClothingForm">æ·»åŠ åˆ°è¡£æ©±</button>
                </div>
            </div>
            
            <!-- ç­›é€‰å’Œæœç´¢ -->
            <div class="control-section">
                <h3 class="control-title">
                    <span>ğŸ”</span>
                    <span>ç­›é€‰å’Œæœç´¢</span>
                </h3>
                <div class="filters">
                    <div class="filter-group">
                        <label for="filterCategory">æŒ‰ç±»åˆ«ç­›é€‰</label>
                        <select id="filterCategory">
                            <option value="">å…¨éƒ¨ç±»åˆ«</option>
                            <option value="ä¸Šè¡£">ä¸Šè¡£</option>
                            <option value="ä¸‹è£…">ä¸‹è£…</option>
                            <option value="è¿è¡£è£™">è¿è¡£è£™</option>
                            <option value="å¤–å¥—">å¤–å¥—</option>
                            <option value="é‹å­">é‹å­</option>
                            <option value="é…é¥°">é…é¥°</option>
                        </select>
                    </div>
                    <div class="filter-group">
                        <label for="filterSeason">æŒ‰å­£èŠ‚ç­›é€‰</label>
                        <select id="filterSeason">
                            <option value="">å…¨éƒ¨å­£èŠ‚</option>
                            <option value="æ˜¥å­£">æ˜¥å­£</option>
                            <option value="å¤å­£">å¤å­£</option>
                            <option value="ç§‹å­£">ç§‹å­£</option>
                            <option value="å†¬å­£">å†¬å­£</option>
                            <option value="å››å­£">å››å­£</option>
                        </select>
                    </div>
                    <div class="filter-group search-box">
                        <label for="searchInput">æœç´¢è¡£ç‰©</label>
                        <input type="text" id="searchInput" placeholder="æŒ‰åç§°ã€é¢œè‰²æˆ–å“ç‰Œæœç´¢...">
                    </div>
                </div>
            </div>
        </div>
        
        <!-- ä½¿ç”¨å¸®åŠ© -->
        <div class="help-section">
            <h3 class="help-title">
                <span>ğŸ’¡</span>
                <span>ä½¿ç”¨å¸®åŠ©</span>
            </h3>
            <div class="help-content">
                <div class="help-item">
                    <div class="help-item-title">ğŸ“¸ ä¸Šä¼ ç…§ç‰‡</div>
                    <div class="help-item-desc">æ‹–æ‹½æˆ–ç‚¹å‡»ä¸Šä¼ è¡£ç‰©ç…§ç‰‡ï¼Œæ”¯æŒJPGã€PNGã€WEBPæ ¼å¼</div>
                </div>
                <div class="help-item">
                    <div class="help-item-title">ğŸ¤– AIè¯†åˆ«</div>
                    <div class="help-item-desc">ä¸Šä¼ å›¾ç‰‡åç‚¹å‡»AIè¯†åˆ«æŒ‰é’®ï¼Œè‡ªåŠ¨åˆ†æé¢œè‰²å’Œç±»å‹</div>
                </div>
                <div class="help-item">
                    <div class="help-item-title">ğŸ·ï¸ æ ‡ç­¾ç®¡ç†</div>
                    <div class="help-item-desc">ä¸ºè¡£ç‰©æ·»åŠ å“ç‰Œã€å°ºç ã€å­£èŠ‚ç­‰æ ‡ç­¾ï¼Œæ–¹ä¾¿ç®¡ç†</div>
                </div>
                <div class="help-item">
                    <div class="help-item-title">ğŸ” å¿«é€Ÿæœç´¢</div>
                    <div class="help-item-desc">ä½¿ç”¨ç­›é€‰å’Œæœç´¢åŠŸèƒ½ï¼Œå¿«é€Ÿæ‰¾åˆ°æƒ³è¦çš„è¡£ç‰©</div>
                </div>
            </div>
        </div>
        
        <!-- è¡£ç‰©å±•ç¤ºåŒºåŸŸ -->
        <div id="wardrobeGrid" class="wardrobe-grid"></div>
        
        <!-- ç©ºçŠ¶æ€ -->
        <div id="emptyState" class="empty-state" style="display: none;">
            <h3>ä½ çš„è¡£æ©±è¿˜æ˜¯ç©ºçš„</h3>
            <p>å¼€å§‹æ·»åŠ ä½ çš„ç¬¬ä¸€ä»¶è¡£ç‰©å§ï¼è®©AIå¸®ä½ æ™ºèƒ½ç®¡ç†è¡£æ©±</p>
        </div>
        
        <!-- é¡µè„š -->
        <div class="footer">
            <p>AIæ™ºèƒ½ç”µå­è¡£æ©± - è®©ç©¿æ­æ›´ç®€å•</p>
            <p>æ•°æ®æœ¬åœ°å­˜å‚¨ï¼Œä¿æŠ¤ä½ çš„éšç§å®‰å…¨</p>
            <p>â¤ï¸ åˆ†äº«ç»™æœ‹å‹ï¼Œä¸€èµ·äº«å—æ™ºèƒ½è¡£æ©±çš„ä¹è¶£</p>
        </div>
    </div>
    
    <!-- ç¼–è¾‘æ¨¡æ€æ¡† -->
    <div id="editModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">ç¼–è¾‘è¡£ç‰©ä¿¡æ¯</h3>
                <button class="close-btn" onclick="closeEditModal()">&times;</button>
            </div>
            <form id="editClothingForm">
                <div class="form-group">
                    <label for="editItemName">è¡£ç‰©åç§°</label>
                    <input type="text" id="editItemName" required>
                </div>
                <div class="form-group">
                    <label for="editItemCategory">è¡£ç‰©ç±»åˆ«</label>
                    <select id="editItemCategory" required>
                        <option value="">é€‰æ‹©ç±»åˆ«</option>
                        <option value="ä¸Šè¡£">ä¸Šè¡£</option>
                        <option value="ä¸‹è£…">ä¸‹è£…</option>
                        <option value="è¿è¡£è£™">è¿è¡£è£™</option>
                        <option value="å¤–å¥—">å¤–å¥—</option>
                        <option value="é‹å­">é‹å­</option>
                        <option value="é…é¥°">é…é¥°</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="editItemColor">ä¸»è¦é¢œè‰²</label>
                    <input type="text" id="editItemColor">
                </div>
                <div class="form-group">
                    <label for="editItemBrand">å“ç‰Œ</label>
                    <input type="text" id="editItemBrand">
                </div>
                <div class="form-group">
                    <label for="editItemSize">å°ºç </label>
                    <input type="text" id="editItemSize">
                </div>
                <div class="form-group">
                    <label for="editItemSeason">é€‚åˆå­£èŠ‚</label>
                    <select id="editItemSeason">
                        <option value="">é€‰æ‹©å­£èŠ‚</option>
                        <option value="æ˜¥å­£">æ˜¥å­£</option>
                        <option value="å¤å­£">å¤å­£</option>
                        <option value="ç§‹å­£">ç§‹å­£</option>
                        <option value="å†¬å­£">å†¬å­£</option>
                        <option value="å››å­£">å››å­£</option>
                    </select>
                </div>
                
                <!-- ç¼–è¾‘æ¨¡æ€æ¡†ä¸­çš„å›¾ç‰‡ä¸Šä¼  -->
                <div class="form-group">
                    <label>è¡£ç‰©å›¾ç‰‡</label>
                    <div class="upload-area" id="editUploadArea">
                        <div class="upload-icon">ğŸ“·</div>
                        <div class="upload-text">ç‚¹å‡»æˆ–æ‹–æ‹½å›¾ç‰‡æ›´æ¢</div>
                        <div class="upload-hint">æ”¯æŒ JPGã€PNGã€WEBP æ ¼å¼ï¼Œæœ€å¤§ 5MB</div>
                        <input type="file" id="editImageInput" accept="image/*" style="display: none;">
                    </div>
                    <div class="image-preview" id="editImagePreview">
                        <img id="editPreviewImg" class="preview-image" alt="é¢„è§ˆ">
                        <button type="button" class="remove-image" id="editRemoveImage">&times;</button>
                    </div>
                </div>
                
                <div style="margin-top: 30px;">
                    <button type="submit" class="btn btn-primary">ä¿å­˜æ›´æ”¹</button>
                </div>
            </form>
        </div>
    </div>
    
    <script>
        // è¡£ç‰©æ•°æ®å­˜å‚¨
        let clothingItems = JSON.parse(localStorage.getItem('clothingItems')) || [];
        let editingItemId = null;
        let currentImageData = null;
        let editImageData = null;
        
        // åˆå§‹åŒ–åº”ç”¨
        document.addEventListener('DOMContentLoaded', function() {
            renderWardrobe();
            updateStats();
            
            // ç»‘å®šäº‹ä»¶ç›‘å¬å™¨
            document.getElementById('addClothingForm').addEventListener('submit', addClothing);
            document.getElementById('editClothingForm').addEventListener('submit', updateClothing);
            document.getElementById('filterCategory').addEventListener('change', filterItems);
            document.getElementById('filterSeason').addEventListener('change', filterItems);
            document.getElementById('searchInput').addEventListener('input', filterItems);
            
            // å›¾ç‰‡ä¸Šä¼ ç›¸å…³äº‹ä»¶
            setupImageUpload();
            setupEditImageUpload();
            
            // æ˜¾ç¤ºæ¬¢è¿ä¿¡æ¯
            if (clothingItems.length === 0) {
                setTimeout(() => {
                    showNotification('æ¬¢è¿ä½¿ç”¨AIæ™ºèƒ½ç”µå­è¡£æ©±ï¼ğŸ‰', 'info');
                }, 1000);
            }
        });
        
        // æ·»åŠ æ–°è¡£ç‰©
        function addClothing(e) {
            e.preventDefault();
            
            const newItem = {
                id: Date.now(),
                name: document.getElementById('itemName').value,
                category: document.getElementById('itemCategory').value,
                color: document.getElementById('itemColor').value,
                brand: document.getElementById('itemBrand').value,
                size: document.getElementById('itemSize').value,
                season: document.getElementById('itemSeason').value,
                image: currentImageData,
                dateAdded: new Date().toLocaleDateString()
            };
            
            clothingItems.push(newItem);
            saveToLocalStorage();
            renderWardrobe();
            updateStats();
            
            // é‡ç½®è¡¨å•
            document.getElementById('addClothingForm').reset();
            resetImageUpload();
            
            // æ˜¾ç¤ºæˆåŠŸæ¶ˆæ¯
            showNotification('è¡£ç‰©æ·»åŠ æˆåŠŸï¼âœ¨', 'success');
        }
        
        // ä¿å­˜åˆ°æœ¬åœ°å­˜å‚¨
        function saveToLocalStorage() {
            localStorage.setItem('clothingItems', JSON.stringify(clothingItems));
        }
        
        // æ¸²æŸ“è¡£æ©±
        function renderWardrobe(items = clothingItems) {
            const grid = document.getElementById('wardrobeGrid');
            const emptyState = document.getElementById('emptyState');
            
            if (items.length === 0) {
                grid.style.display = 'none';
                emptyState.style.display = 'block';
                return;
            }
            
            grid.style.display = 'grid';
            emptyState.style.display = 'none';
            
            grid.innerHTML = items.map(item => `
                <div class="clothing-item">
                    <div class="category-tag">${item.category}</div>
                    <div class="item-image">
                        ${item.image ? 
                            `<img src="${item.image}" alt="${item.name}" class="real-image">` : 
                            `<div style="display: flex; align-items: center; justify-content: center; height: 100%; font-size: 4rem; border: 2px dashed #e2e8f0; border-radius: 15px; background: #f8f9fa;">${getCategoryIcon(item.category)}</div>`
                        }
                    </div>
                    <div class="item-name">${item.name}</div>
                    <div class="item-details">
                        <div class="item-detail"><strong>é¢œè‰²:</strong> ${item.color || 'æœªè®¾ç½®'}</div>
                        <div class="item-detail"><strong>å“ç‰Œ:</strong> ${item.brand || 'æœªè®¾ç½®'}</div>
                        <div class="item-detail"><strong>å°ºç :</strong> ${item.size || 'æœªè®¾ç½®'}</div>
                        <div class="item-detail"><strong>å­£èŠ‚:</strong> ${item.season || 'æœªè®¾ç½®'}</div>
                    </div>
                    <div class="item-actions">
                        <button class="btn btn-edit" onclick="editItem(${item.id})">ç¼–è¾‘</button>
                        <button class="btn btn-danger" onclick="deleteItem(${item.id})">åˆ é™¤</button>
                    </div>
                </div>
            `).join('');
        }
        
        // è·å–ç±»åˆ«å›¾æ ‡
        function getCategoryIcon(category) {
            const icons = {
                'ä¸Šè¡£': 'ğŸ‘•',
                'ä¸‹è£…': 'ğŸ‘–',
                'è¿è¡£è£™': 'ğŸ‘—',
                'å¤–å¥—': 'ğŸ§¥',
                'é‹å­': 'ğŸ‘Ÿ',
                'é…é¥°': 'ğŸ’'
            };
            return icons[category] || 'ğŸ‘”';
        }
        
        // æ›´æ–°ç»Ÿè®¡æ•°æ®
        function updateStats() {
            const totalItems = clothingItems.length;
            const topCount = clothingItems.filter(item => item.category === 'ä¸Šè¡£').length;
            const bottomCount = clothingItems.filter(item => ['ä¸‹è£…', 'è¿è¡£è£™'].includes(item.category)).length;
            const shoeCount = clothingItems.filter(item => item.category === 'é‹å­').length;
            
            document.getElementById('totalItems').textContent = totalItems;
            document.getElementById('topCount').textContent = topCount;
            document.getElementById('bottomCount').textContent = bottomCount;
            document.getElementById('shoeCount').textContent = shoeCount;
        }
        
        // ç­›é€‰åŠŸèƒ½
        function filterItems() {
            const categoryFilter = document.getElementById('filterCategory').value;
            const seasonFilter = document.getElementById('filterSeason').value;
            const searchTerm = document.getElementById('searchInput').value.toLowerCase();
            
            let filteredItems = clothingItems.filter(item => {
                const matchesCategory = !categoryFilter || item.category === categoryFilter;
                const matchesSeason = !seasonFilter || item.season === seasonFilter;
                const matchesSearch = !searchTerm || 
                    item.name.toLowerCase().includes(searchTerm) ||
                    (item.color && item.color.toLowerCase().includes(searchTerm)) ||
                    (item.brand && item.brand.toLowerCase().includes(searchTerm));
                
                return matchesCategory && matchesSeason && matchesSearch;
            });
            
            renderWardrobe(filteredItems);
        }
        
        // ç¼–è¾‘è¡£ç‰©
        function editItem(id) {
            const item = clothingItems.find(item => item.id === id);
            if (!item) return;
            
            editingItemId = id;
            editImageData = item.image || null;
            
            // å¡«å……ç¼–è¾‘è¡¨å•
            document.getElementById('editItemName').value = item.name;
            document.getElementById('editItemCategory').value = item.category;
            document.getElementById('editItemColor').value = item.color || '';
            document.getElementById('editItemBrand').value = item.brand || '';
            document.getElementById('editItemSize').value = item.size || '';
            document.getElementById('editItemSeason').value = item.season || '';
            
            // æ˜¾ç¤ºç°æœ‰å›¾ç‰‡æˆ–é‡ç½®å›¾ç‰‡åŒºåŸŸ
            if (item.image) {
                showEditImagePreview(item.image);
            } else {
                resetEditImageUpload();
            }
            
            // æ˜¾ç¤ºæ¨¡æ€æ¡†
            document.getElementById('editModal').style.display = 'block';
        }
        
        // æ›´æ–°è¡£ç‰©
        function updateClothing(e) {
            e.preventDefault();
            
            const itemIndex = clothingItems.findIndex(item => item.id === editingItemId);
            if (itemIndex === -1) return;
            
            clothingItems[itemIndex] = {
                ...clothingItems[itemIndex],
                name: document.getElementById('editItemName').value,
                category: document.getElementById('editItemCategory').value,
                color: document.getElementById('editItemColor').value,
                brand: document.getElementById('editItemBrand').value,
                size: document.getElementById('editItemSize').value,
                season: document.getElementById('editItemSeason').value,
                image: editImageData
            };
            
            saveToLocalStorage();
            renderWardrobe();
            updateStats();
            closeEditModal();
            
            showNotification('è¡£ç‰©æ›´æ–°æˆåŠŸï¼âœ¨', 'success');
        }
        
        // å…³é—­ç¼–è¾‘æ¨¡æ€æ¡†
        function closeEditModal() {
            document.getElementById('editModal').style.display = 'none';
            editingItemId = null;
            editImageData = null;
            resetEditImageUpload();
        }
        
        // åˆ é™¤è¡£ç‰©
        function deleteItem(id) {
            if (confirm('ç¡®å®šè¦åˆ é™¤è¿™ä»¶è¡£ç‰©å—ï¼Ÿ')) {
                clothingItems = clothingItems.filter(item => item.id !== id);
                saveToLocalStorage();
                renderWardrobe();
                updateStats();
                
                showNotification('è¡£ç‰©åˆ é™¤æˆåŠŸï¼', 'info');
            }
        }
        
        // å›¾ç‰‡ä¸Šä¼ åŠŸèƒ½è®¾ç½®
        function setupImageUpload() {
            const uploadArea = document.getElementById('uploadArea');
            const imageInput = document.getElementById('imageInput');
            const imagePreview = document.getElementById('imagePreview');
            const previewImg = document.getElementById('previewImg');
            const removeImage = document.getElementById('removeImage');
            const aiAnalyzeBtn = document.getElementById('aiAnalyzeBtn');
            
            // ç‚¹å‡»ä¸Šä¼ åŒºåŸŸ
            uploadArea.addEventListener('click', () => {
                imageInput.click();
            });
            
            // æ–‡ä»¶é€‰æ‹©
            imageInput.addEventListener('change', handleImageSelect);
            
            // æ‹–æ‹½åŠŸèƒ½
            uploadArea.addEventListener('dragover', (e) => {
                e.preventDefault();
                uploadArea.classList.add('drag-over');
            });
            
            uploadArea.addEventListener('dragleave', () => {
                uploadArea.classList.remove('drag-over');
            });
            
            uploadArea.addEventListener('drop', (e) => {
                e.preventDefault();
                uploadArea.classList.remove('drag-over');
                const files = e.dataTransfer.files;
                if (files.length > 0) {
                    handleImageFile(files[0]);
                }
            });
            
            // ç§»é™¤å›¾ç‰‡
            removeImage.addEventListener('click', resetImageUpload);
            
            // AIåˆ†æ
            aiAnalyzeBtn.addEventListener('click', analyzeImageWithAI);
        }
        
        // è®¾ç½®ç¼–è¾‘æ¨¡æ€æ¡†ä¸­çš„å›¾ç‰‡ä¸Šä¼ åŠŸèƒ½
        function setupEditImageUpload() {
            const editUploadArea = document.getElementById('editUploadArea');
            const editImageInput = document.getElementById('editImageInput');
            const editImagePreview = document.getElementById('editImagePreview');
            const editPreviewImg = document.getElementById('editPreviewImg');
            const editRemoveImage = document.getElementById('editRemoveImage');
            
            // ç‚¹å‡»ä¸Šä¼ åŒºåŸŸ
            editUploadArea.addEventListener('click', () => {
                editImageInput.click();
            });
            
            // æ–‡ä»¶é€‰æ‹©
            editImageInput.addEventListener('change', handleEditImageSelect);
            
            // æ‹–æ‹½åŠŸèƒ½
            editUploadArea.addEventListener('dragover', (e) => {
                e.preventDefault();
                editUploadArea.classList.add('drag-over');
            });
            
            editUploadArea.addEventListener('dragleave', () => {
                editUploadArea.classList.remove('drag-over');
            });
            
            editUploadArea.addEventListener('drop', (e) => {
                e.preventDefault();
                editUploadArea.classList.remove('drag-over');
                const files = e.dataTransfer.files;
                if (files.length > 0) {
                    handleEditImageFile(files[0]);
                }
            });
            
            // ç§»é™¤å›¾ç‰‡
            editRemoveImage.addEventListener('click', resetEditImageUpload);
        }
        
        // å¤„ç†å›¾ç‰‡é€‰æ‹©
        function handleImageSelect(e) {
            const file = e.target.files[0];
            if (file) {
                handleImageFile(file);
            }
        }
        
        // å¤„ç†ç¼–è¾‘å›¾ç‰‡é€‰æ‹©
        function handleEditImageSelect(e) {
            const file = e.target.files[0];
            if (file) {
                handleEditImageFile(file);
            }
        }
        
        // å¤„ç†å•ä¸ªå›¾ç‰‡æ–‡ä»¶
        function handleImageFile(file) {
            // éªŒè¯æ–‡ä»¶ç±»å‹
            if (!file.type.startsWith('image/')) {
                showNotification('è¯·é€‰æ‹©å›¾ç‰‡æ–‡ä»¶ï¼', 'error');
                return;
            }
            
            // éªŒè¯æ–‡ä»¶å¤§å° (5MB)
            if (file.size > 5 * 1024 * 1024) {
                showNotification('å›¾ç‰‡å¤§å°ä¸èƒ½è¶…è¿‡5MBï¼', 'error');
                return;
            }
            
            // å‹ç¼©å¹¶é¢„è§ˆå›¾ç‰‡
            compressImage(file, (compressedDataUrl) => {
                currentImageData = compressedDataUrl;
                showImagePreview(compressedDataUrl);
            });
        }
        
        // å¤„ç†ç¼–è¾‘å›¾ç‰‡æ–‡ä»¶
        function handleEditImageFile(file) {
            if (!file.type.startsWith('image/')) {
                showNotification('è¯·é€‰æ‹©å›¾ç‰‡æ–‡ä»¶ï¼', 'error');
                return;
            }
            
            if (file.size > 5 * 1024 * 1024) {
                showNotification('å›¾ç‰‡å¤§å°ä¸èƒ½è¶…è¿‡5MBï¼', 'error');
                return;
            }
            
            compressImage(file, (compressedDataUrl) => {
                editImageData = compressedDataUrl;
                showEditImagePreview(compressedDataUrl);
            });
        }
        
        // å›¾ç‰‡å‹ç¼©
        function compressImage(file, callback) {
            const canvas = document.createElement('canvas');
            const ctx = canvas.getContext('2d');
            const img = new Image();
            
            img.onload = function() {
                // è®¡ç®—æ–°å°ºå¯¸ï¼ˆæœ€å¤§800pxï¼‰
                const maxSize = 800;
                let { width, height } = img;
                
                if (width > height) {
                    if (width > maxSize) {
                        height = height * (maxSize / width);
                        width = maxSize;
                    }
                } else {
                    if (height > maxSize) {
                        width = width * (maxSize / height);
                        height = maxSize;
                    }
                }
                
                canvas.width = width;
                canvas.height = height;
                
                // ç»˜åˆ¶å‹ç¼©åçš„å›¾ç‰‡
                ctx.drawImage(img, 0, 0, width, height);
                
                // è½¬æ¢ä¸ºDataURL
                const compressedDataUrl = canvas.toDataURL('image/jpeg', 0.8);
                callback(compressedDataUrl);
            };
            
            img.src = URL.createObjectURL(file);
        }
        
        // æ˜¾ç¤ºå›¾ç‰‡é¢„è§ˆ
        function showImagePreview(dataUrl) {
            const uploadArea = document.getElementById('uploadArea');
            const imagePreview = document.getElementById('imagePreview');
            const previewImg = document.getElementById('previewImg');
            const aiAnalyzeBtn = document.getElementById('aiAnalyzeBtn');
            
            uploadArea.style.display = 'none';
            imagePreview.style.display = 'block';
            previewImg.src = dataUrl;
            aiAnalyzeBtn.style.display = 'block';
        }
        
        // æ˜¾ç¤ºç¼–è¾‘å›¾ç‰‡é¢„è§ˆ
        function showEditImagePreview(dataUrl) {
            const editUploadArea = document.getElementById('editUploadArea');
            const editImagePreview = document.getElementById('editImagePreview');
            const editPreviewImg = document.getElementById('editPreviewImg');
            
            editUploadArea.style.display = 'none';
            editImagePreview.style.display = 'block';
            editPreviewImg.src = dataUrl;
        }
        
        // é‡ç½®å›¾ç‰‡ä¸Šä¼ 
        function resetImageUpload() {
            const uploadArea = document.getElementById('uploadArea');
            const imagePreview = document.getElementById('imagePreview');
            const imageInput = document.getElementById('imageInput');
            const aiAnalyzeBtn = document.getElementById('aiAnalyzeBtn');
            
            uploadArea.style.display = 'block';
            imagePreview.style.display = 'none';
            aiAnalyzeBtn.style.display = 'none';
            imageInput.value = '';
            currentImageData = null;
        }
        
        // é‡ç½®ç¼–è¾‘å›¾ç‰‡ä¸Šä¼ 
        function resetEditImageUpload() {
            const editUploadArea = document.getElementById('editUploadArea');
            const editImagePreview = document.getElementById('editImagePreview');
            const editImageInput = document.getElementById('editImageInput');
            
            editUploadArea.style.display = 'block';
            editImagePreview.style.display = 'none';
            editImageInput.value = '';
            editImageData = null;
        }
        
        // AIå›¾ç‰‡è¯†åˆ«åˆ†æ
        async function analyzeImageWithAI() {
            if (!currentImageData) {
                showNotification('è¯·å…ˆé€‰æ‹©å›¾ç‰‡ï¼', 'error');
                return;
            }
            
            const aiAnalyzeBtn = document.getElementById('aiAnalyzeBtn');
            const originalText = aiAnalyzeBtn.innerHTML;
            
            // æ˜¾ç¤ºåŠ è½½çŠ¶æ€
            aiAnalyzeBtn.disabled = true;
            aiAnalyzeBtn.innerHTML = '<span class="loading-spinner"></span>AIåˆ†æä¸­...';
            
            try {
                // æ™ºèƒ½AIåˆ†æ
                const result = await simulateAIAnalysis(currentImageData);
                
                // æ˜¾ç¤ºåˆ†æç»“æœå’Œç½®ä¿¡åº¦
                if (result.name) document.getElementById('itemName').value = result.name;
                if (result.category) document.getElementById('itemCategory').value = result.category;
                if (result.color) document.getElementById('itemColor').value = result.color;
                if (result.season) document.getElementById('itemSeason').value = result.season;
                
                // æ˜¾ç¤ºç½®ä¿¡åº¦ä¿¡æ¯
                const confidence = result.confidence;
                let confidenceText = 'è¯†åˆ«å®Œæˆï¼';
                if (confidence) {
                    const avgConfidence = ((confidence.color + confidence.category + confidence.season) / 3 * 100).toFixed(0);
                    confidenceText += ` (ç½®ä¿¡åº¦: ${avgConfidence}%)`;
                }
                
                showNotification(confidenceText, 'success');
            } catch (error) {
                console.error('AIåˆ†æå¤±è´¥:', error);
                showNotification('AIåˆ†æå¤±è´¥ï¼Œè¯·æ‰‹åŠ¨å¡«å†™ä¿¡æ¯', 'error');
            } finally {
                // æ¢å¤æŒ‰é’®çŠ¶æ€
                aiAnalyzeBtn.disabled = false;
                aiAnalyzeBtn.innerHTML = originalText;
            }
        }
        
        // æ™ºèƒ½å›¾åƒåˆ†æï¼ˆåŸºäºé¢œè‰²ç‰¹å¾å’Œå½¢çŠ¶ç‰¹å¾çš„AIè¯†åˆ«ï¼‰
        function simulateAIAnalysis(imageData) {
            return new Promise((resolve) => {
                setTimeout(() => {
                    // åˆ›å»ºå›¾åƒåˆ†æcanvas
                    const canvas = document.createElement('canvas');
                    const ctx = canvas.getContext('2d');
                    const img = new Image();
                    
                    img.onload = function() {
                        canvas.width = img.width;
                        canvas.height = img.height;
                        ctx.drawImage(img, 0, 0);
                        
                        // åˆ†æå›¾åƒé¢œè‰²
                        const colorAnalysis = analyzeImageColors(ctx, canvas.width, canvas.height);
                        
                        // åˆ†æå›¾åƒå½¢çŠ¶å’Œçº¹ç†ç‰¹å¾
                        const shapeAnalysis = analyzeImageShape(ctx, canvas.width, canvas.height);
                        
                        // åŸºäºåˆ†æç»“æœæ¨æ–­è¡£ç‰©ä¿¡æ¯
                        const result = inferClothingInfo(colorAnalysis, shapeAnalysis);
                        
                        resolve(result);
                    };
                    
                    img.src = imageData;
                }, 1500);
            });
        }
        
        // é¢œè‰²åˆ†æå‡½æ•°
        function analyzeImageColors(ctx, width, height) {
            const imageData = ctx.getImageData(0, 0, width, height);
            const data = imageData.data;
            const colorCounts = {};
            const sampleRate = 10; // æ¯10ä¸ªåƒç´ é‡‡æ ·ä¸€æ¬¡ä»¥æé«˜æ€§èƒ½
            
            for (let i = 0; i < data.length; i += 4 * sampleRate) {
                const r = data[i];
                const g = data[i + 1];
                const b = data[i + 2];
                const alpha = data[i + 3];
                
                // è·³è¿‡é€æ˜åƒç´ 
                if (alpha < 128) continue;
                
                // å°†RGBè½¬æ¢ä¸ºHSLä»¥æ›´å¥½åœ°è¯†åˆ«é¢œè‰²
                const hsl = rgbToHsl(r, g, b);
                const colorName = getColorName(hsl);
                
                colorCounts[colorName] = (colorCounts[colorName] || 0) + 1;
            }
            
            // æ‰¾åˆ°æœ€ä¸»è¦çš„é¢œè‰²
            const sortedColors = Object.entries(colorCounts)
                .sort((a, b) => b[1] - a[1])
                .map(([color]) => color);
            
            return {
                primaryColor: sortedColors[0] || 'æœªçŸ¥',
                secondaryColor: sortedColors[1] || null,
                colorDistribution: colorCounts
            };
        }
        
        // RGBè½¬HSL
        function rgbToHsl(r, g, b) {
            r /= 255;
            g /= 255;
            b /= 255;
            
            const max = Math.max(r, g, b);
            const min = Math.min(r, g, b);
            let h, s, l = (max + min) / 2;
            
            if (max === min) {
                h = s = 0;
            } else {
                const d = max - min;
                s = l > 0.5 ? d / (2 - max - min) : d / (max + min);
                switch (max) {
                    case r: h = (g - b) / d + (g < b ? 6 : 0); break;
                    case g: h = (b - r) / d + 2; break;
                    case b: h = (r - g) / d + 4; break;
                }
                h /= 6;
            }
            
            return [h * 360, s * 100, l * 100];
        }
        
        // æ ¹æ®HSLå€¼è·å–é¢œè‰²åç§°
        function getColorName([h, s, l]) {
            // é»‘ç™½ç°å¤„ç†
            if (s < 10) {
                if (l < 20) return 'é»‘è‰²';
                if (l > 80) return 'ç™½è‰²';
                return 'ç°è‰²';
            }
            
            // ä½äº®åº¦å¤„ç†
            if (l < 20) return 'æ·±è‰²';
            if (l > 90) return 'æµ…è‰²';
            
            // æ ¹æ®è‰²ç›¸åˆ¤æ–­é¢œè‰²
            if (h < 15 || h > 345) return s > 50 ? 'çº¢è‰²' : 'ç²‰è‰²';
            if (h < 45) return 'æ©™è‰²';
            if (h < 75) return 'é»„è‰²';
            if (h < 150) return 'ç»¿è‰²';
            if (h < 210) return 'é’è‰²';
            if (h < 270) return 'è“è‰²';
            if (h < 330) return 'ç´«è‰²';
            return 'ç²‰è‰²';
        }
        
        // å½¢çŠ¶åˆ†æå‡½æ•°
        function analyzeImageShape(ctx, width, height) {
            const imageData = ctx.getImageData(0, 0, width, height);
            const data = imageData.data;
            
            // è®¡ç®—å›¾åƒçš„é•¿å®½æ¯”
            const aspectRatio = width / height;
            
            // åˆ†æè¾¹ç¼˜å¯†åº¦ï¼ˆç®€åŒ–ç‰ˆæœ¬ï¼‰
            let edgeCount = 0;
            const sampleSize = Math.min(width, height) / 20;
            
            for (let y = sampleSize; y < height - sampleSize; y += sampleSize) {
                for (let x = sampleSize; x < width - sampleSize; x += sampleSize) {
                    const idx = (y * width + x) * 4;
                    const brightness = (data[idx] + data[idx + 1] + data[idx + 2]) / 3;
                    
                    // æ£€æŸ¥å‘¨å›´åƒç´ çš„äº®åº¦å·®å¼‚
                    const rightIdx = (y * width + x + sampleSize) * 4;
                    const downIdx = ((y + sampleSize) * width + x) * 4;
                    
                    if (rightIdx < data.length && downIdx < data.length) {
                        const rightBrightness = (data[rightIdx] + data[rightIdx + 1] + data[rightIdx + 2]) / 3;
                        const downBrightness = (data[downIdx] + data[downIdx + 1] + data[downIdx + 2]) / 3;
                        
                        if (Math.abs(brightness - rightBrightness) > 30 || 
                            Math.abs(brightness - downBrightness) > 30) {
                            edgeCount++;
                        }
                    }
                }
            }
            
            return {
                aspectRatio,
                edgeDensity: edgeCount / ((width / sampleSize) * (height / sampleSize)),
                isVertical: aspectRatio < 0.8,
                isHorizontal: aspectRatio > 1.2
            };
        }
        
        // åŸºäºåˆ†æç»“æœæ¨æ–­è¡£ç‰©ä¿¡æ¯
        function inferClothingInfo(colorAnalysis, shapeAnalysis) {
            const { primaryColor, secondaryColor } = colorAnalysis;
            const { aspectRatio, edgeDensity, isVertical, isHorizontal } = shapeAnalysis;
            
            // ç±»åˆ«æ¨æ–­é€»è¾‘
            let category;
            let name;
            let season;
            
            if (isVertical && aspectRatio < 0.6) {
                // å¾ˆé«˜å¾ˆçª„ï¼Œå¯èƒ½æ˜¯è¿è¡£è£™æˆ–å¤§è¡£
                category = edgeDensity > 0.3 ? 'è¿è¡£è£™' : 'å¤–å¥—';
                name = category === 'è¿è¡£è£™' ? 'è¿è¡£è£™' : 'å¤§è¡£';
            } else if (isHorizontal) {
                // å¾ˆå®½ï¼Œå¯èƒ½æ˜¯é‹å­æˆ–é…é¥°
                category = 'é‹å­';
                name = 'é‹å­';
            } else if (aspectRatio > 0.8 && aspectRatio < 1.2) {
                // æ¥è¿‘æ­£æ–¹å½¢ï¼Œå¯èƒ½æ˜¯ä¸Šè¡£
                category = 'ä¸Šè¡£';
                const topTypes = ['Tæ¤', 'è¡¬è¡«', 'æ¯›è¡£', 'èƒŒå¿ƒ'];
                name = topTypes[Math.floor(Math.random() * topTypes.length)];
            } else {
                // å…¶ä»–æƒ…å†µï¼Œå¯èƒ½æ˜¯ä¸‹è£…
                category = 'ä¸‹è£…';
                const bottomTypes = ['ç‰›ä»”è£¤', 'ä¼‘é—²è£¤', 'çŸ­è£¤', 'è£™å­'];
                name = bottomTypes[Math.floor(Math.random() * bottomTypes.length)];
            }
            
            // å­£èŠ‚æ¨æ–­
            const darkColors = ['é»‘è‰²', 'æ·±è‰²', 'ç°è‰²'];
            const lightColors = ['ç™½è‰²', 'æµ…è‰²', 'é»„è‰²'];
            const warmColors = ['çº¢è‰²', 'æ©™è‰²', 'é»„è‰²', 'ç²‰è‰²'];
            const coolColors = ['è“è‰²', 'é’è‰²', 'ç´«è‰²', 'ç»¿è‰²'];
            
            if (category === 'å¤–å¥—' || darkColors.includes(primaryColor)) {
                season = 'ç§‹å­£';
            } else if (lightColors.includes(primaryColor)) {
                season = 'å¤å­£';
            } else if (warmColors.includes(primaryColor)) {
                season = 'æ˜¥å­£';
            } else if (coolColors.includes(primaryColor)) {
                season = 'å†¬å­£';
            } else {
                season = 'å››å­£';
            }
            
            // ç”Ÿæˆæ›´å‡†ç¡®çš„åç§°
            const coloredName = `${primaryColor}${name}`;
            
            return {
                name: coloredName,
                category: category,
                color: primaryColor,
                season: season,
                confidence: {
                    color: Object.keys(colorAnalysis.colorDistribution).length > 0 ? 0.8 : 0.3,
                    category: edgeDensity > 0.2 ? 0.7 : 0.5,
                    season: 0.6
                }
            };
        }
        
        // æ”¹è¿›çš„é€šçŸ¥å‡½æ•°
        function showNotification(message, type = 'success') {
            const notification = document.createElement('div');
            const colors = {
                success: 'linear-gradient(135deg, #4ade80 0%, #22c55e 100%)',
                error: 'linear-gradient(135deg, #e53e3e 0%, #c53030 100%)',
                info: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',
                warning: 'linear-gradient(135deg, #fbbf24 0%, #f59e0b 100%)'
            };
            
            notification.style.cssText = `
                position: fixed;
                top: 30px;
                right: 30px;
                background: ${colors[type] || colors.success};
                color: white;
                padding: 20px 25px;
                border-radius: 15px;
                box-shadow: 0 10px 30px rgba(0,0,0,0.2);
                z-index: 1001;
                font-weight: 600;
                font-size: 1rem;
                transform: translateX(400px);
                transition: all 0.3s ease;
                max-width: 350px;
                backdrop-filter: blur(10px);
            `;
            notification.textContent = message;
            
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.style.transform = 'translateX(0)';
            }, 100);
            
            setTimeout(() => {
                notification.style.transform = 'translateX(400px)';
                setTimeout(() => {
                    if (document.body.contains(notification)) {
                        document.body.removeChild(notification);
                    }
                }, 300);
            }, 3000);
        }
        
        // ç‚¹å‡»æ¨¡æ€æ¡†å¤–éƒ¨å…³é—­
        window.onclick = function(event) {
            const modal = document.getElementById('editModal');
            if (event.target === modal) {
                closeEditModal();
            }
        }
        
        // é”®ç›˜å¿«æ·é”®
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape') {
                closeEditModal();
            }
        });
    </script>
</body>
</html>